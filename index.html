// Substitui esta parte no teu código
const apiKey = 'dabdb2f661367ed64a493d919c04547e7f5094ab'; 

async function carregarNoticias() {
    const status = document.getElementById('cache-status');
    // Usamos um serviço para evitar o erro de CORS que viste antes
    const proxy = "https://corsproxy.io/?"; 
    const url = `https://cryptopanic.com/api/v1/posts/?auth_token=${apiKey}&kind=news&public=true`;

    try {
        status.innerText = "Buscando novidades no mercado...";
        const response = await fetch(proxy + encodeURIComponent(url));
        const data = await response.json();

        if (data.results) {
            exibirNoticias(data.results);
            status.innerText = "Mercado atualizado via CryptoPanic!";
        }
    } catch (error) {
        status.innerText = "Erro ao conectar. Tente novamente em instantes.";
        console.error(error);
    }
}

// Ajuste na função exibirNoticias para ler o formato da CryptoPanic
function exibirNoticias(results) {
    const grid = document.getElementById('news-grid');
    grid.innerHTML = results.slice(0, 10).map(art => `
        <div class="card">
            <div class="card-body">
                <span class="badge">${art.votes.positive > 0 ? 'Bullish' : 'News'}</span>
                <h3>${art.title}</h3>
                <p>Fonte: ${art.domain}</p>
                <a href="${art.url}" target="_blank" style="color: #38bdf8; text-decoration: none; font-weight: bold;">LER MAIS →</a>
            </div>
        </div>
    `).join('');
}
